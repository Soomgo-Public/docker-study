# Problem

- Docker와 VM의 차이에 대하여 설명해보세요.

<br/><br/><br/>

# Docker (Docker)

## 출현 배경

Docker의 출현 배경은 공식문서의 표현을 빌리자면 `애플리케이션을 인프라에서 분리하여 소프트웨어를 신속하게 제공`하기 위해서이다.

### 웹 서비스

#### 모놀리틱

> 과거에는 주로 하나의 서버에 모든 기능을 구현하는 모놀리틱 구조의 서비스가 많았다.

시간의 흐름에 따라 관심사를 분리하고 복잡도를 낮추기 위해 MVC등 다양한 패턴을 적용했지만,<br/>결국 코드 레벨에서의 적용이기에 궁극적으로는 하나의 서버이다.

#### 마이크로 서비스

> 모놀리틱 구조에서 근대에는 마이크로 서비스 형태로 변화하고 있다

마이크로 서비스는 기능(도메인) 단위로 서버를 분리하는 구조이다.
<br />

즉, 모놀리틱 구조에서 마이크로 서비스 형태로 변화하면서 하나의 어플리케이션에 여러 개의 웹 서비스를 호스팅 해야하는 일이 많아졌다.
<br/><br/>
웹 서버는 24시간 구동이 필요하거나 특정 목적으로 사용되는 프로그램이 많다. 때문에 서버 환경에 따라 동일한 프로그램인데도 설정이 많이 달라지며 동일한 환경의 세팅을 매번 같이 해주는 것은 **_비효율_** 적이다

### _So, Docker has arrived!_

보통 Docker로 `서버를 만다`, `서버를 감싼다`라고 표현한다. 즉, Docker는 서버를 랩핑해서 동일한 서버환경을 `제공`할 수 있다.<br/>
덕분에 마이크로 서비스로 변화하는 요즘 서비스들에게 **_공통된 서버 환경을 제공할 수 있게 된다_**

<br />

## 기본 이해

- Docker는 리눅스 컨테이너로 시작된 기술이다.
  > 리눅스 커널의 LXC기술을 이용해 단일 컴퓨터에서 별도의 컨테이너를 만들어서 개별적인 시스템이 동작하게 만든 기술<br/>(최근에는 lxc가 아닌 자체 기술을 사용한다)
- Docker는 데몬 프로그램이다
  <br/>(항상 실행되고 있다)
- 서버와 클라이언트 구조처럼 요청과 응답이 이루어진다

<br/>

## 이미지

> 스크립트의 집합 (정적파일)

- 레이어 형태로 스크립트가 쌓여서 하나의 이미지가 된다

<br/>

## 컨테이너

> 만들어진 이미를 실행한다<br/>Docker는 이미지를 만들고 컨테이너로 실행한다.

- 하나의 이미지로 다수의 컨테이너를 실행할 수 있다. (인스턴스)
- 격리 및 보안을 통해 특정 호스트에서 동시에 많은 컨테이너를 실행한다
- 느슨하게 격리된 환경에서 애플리케이션을 패키징하고 실행
  > Docker는 운영체제 레벨에서는 호스트를 사용하고 애플리케이션 환경만 분리한다. (느슨한 고립)

<br />

## 아키텍쳐

위에 기본이해에서 확인했듯, Docker는 요청과 응답이 존재한다. 공식문서에 있는 아래의 글귀를 통해 보다 쉽게 이해할 수 있다.

```
you can connect a Docker client to a remote Docker daemon.
The Docker client and daemon communicate using a REST API, over UNIX sockets or a network interface.
```

1. Docker 데몬프로그램으로 항상 실행되어 있다.
2. 터미널 등에서 Docker 명령어를 통해 Docker 데몬에 request를 보내고, 데몬프로그램에서 response를 내린다.

<br />

## Docker는 빠르다 ?

공식문서에서 Docker를 `Fast, consistent delivery of your applications`이라고 표현한다.
<br>
어떤 근거로 공식문서는 Docker를 빠르다고 표현할까?

### VS VM (virtual machine)

> **_VM은 커널까지 말아져있다. 그러나 Docker는 컨테이너끼리 통신이된다_**

#### VM은 하이퍼바이저를 사용하여 물리적 하드웨어 위에 가상 머신을 생성한다.

VM은 독립적인 운영 체제를 실행하는 것처럼 보이며, 각각의 가상 머신은 자체 커널을 가지게 된다. 즉, 각 VM은 자체 운영 체제와 커널을 가지고 있으며, 이러한 가상 머신들은 물리적 하드웨어에서 완전히 격리되어 있다.

<br/>

**_하이버파이저_**

> 하이퍼바이저는 단일 물리적 머신에서 여러 가상 머신을 실행하는 데 사용할 수 있는 소프트웨어를 나타낸다.

<br/>

### Docker는 컨테이너 기반 가상화를 한다.

Docker의 컨테이너는 호스트 운영 체제의 커널을 공유하며, 각 컨테이너는 애플리케이션과 해당 의존성을 격리된 환경에서 실행할 수 있다.

<br/>

즉, Docker 컨테이너끼리는 호스트 운영 체제의 커널을 공유하기 때문에 재부팅도 필요 없으며 (하이퍼바이저 보다) 서로 빠르게 통신할 수 있다.
